[tox]
envlist = py34,flake8,isort,manifest,docs
minversion = 2.1.0

[testenv]
commands =
    make develop
    make coverage TEST_ARGS='-v'
install_command=pip install {opts} {packages}
whitelist_externals = make

[testenv:flake8]
basepython = python3.4
commands =
    flake8 setup.py alfred/ tests/
deps =
    flake8==2.5.4
skip_install = True

[testenv:isort]
basepython = python3.4
commands =
    isort --check-only --recursive setup.py alfred/ tests/
deps =
    isort==4.2.2
skip_install = True

[testenv:manifest]
basepython = python3.4
commands =
    check-manifest -v
deps =
    check-manifest==0.31
skip_install = True

[testenv:docs]
basepython = python3.4
commands =
    pip install -U -e .[docs]
    make docs BUILDDIR={envtmpdir} SPHINXOPTS='-W'
    make -C docs linkcheck BUILDDIR={envtmpdir}
    doc8
deps =
    doc8==0.6.0
